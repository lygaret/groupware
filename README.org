#+TITLE: groupware
#+OPTIONS: todo:t html-checkbox-type:html

~groupware~ is a calendar/contacts/notes sharing server for small, mostly trusted groups,
like school-aged families, polycules and co-parenting groups.

* how-to

- *run migrations* :: ~bundle exec bin/migrate~
- *run server*     :: ~bundle exec bin/serve~
- *run console*    :: ~bundle exec bin/console~
- *run tests* ::

    http://www.webdav.org/neon/litmus/ is a WebDAV server test suite, which we're currently using
    as an integration suite:

    2. in this repository, run the server: ~bundle exec bin/migrate && bundle exec bin/server~
    1. in some directory, download and extract the ~litmus~ source
    3. in the ~litmus~ directory, run: ~make URL=http://localhost:9292/ check~

* technical

- WebDAV for shared file storage
    - notion like editor for these files, maybe just for markdown
- CalDAV for calendars
- CardDAV for contacts
- Bot framework for ingest via chat
    - Telegram, SMS, Signal, WhatsApp?

- group can have members, which have more or less the same rights as each other
- group can have non-members, which are first-class invitees etc, but don't have rights
- circles
    - a "circle" is a grouping of people
    - can be owned by a user or globally across the group
    - has metadata (relationship type)
    - can be a target for things like calendar invites

** webdav

- a ~resource~ has content info, a path, and a parent link
- a ~resource~ has many ~properties~
    - ~properties_user~ contains properties set by request (spec calls them "dead properties")
    - ~properties_sys~ contains properties managed by the server (spec calls them "live properties")
        - ~properties_sys~ is automatically populated via trigger

- the repository can be given ~indexers~, which do two things:
    - provides ~REPORT~ handling for a resource
    - provides data storage (default is ~content~ column in db, but can do otherwise)
    - provides record processing
        - ~caldav~ and ~carddav~ are indexers
        - a "photos" collection which had specific reports etc. may be todo

* status

- [x] webdav (resources + properties)
- [ ] webdav (rework to newer rfc)
- [ ] webdav (acl, principal, lock/unlock)
- [ ] caldav (figure out storage for events, since we have to process ical as xml in some places)
    
* relevant rfcs

- webdav
    - https://datatracker.ietf.org/doc/html/rfc4918 - more recent version
    - https://datatracker.ietf.org/doc/html/rfc2518 - original spec
    - access control
        - https://datatracker.ietf.org/doc/html/rfc3744 - general acl management
        - https://datatracker.ietf.org/doc/html/rfc5397 - current principal query

- caldav
    - https://datatracker.ietf.org/doc/html/rfc4791.html

- carddav
    - https://datatracker.ietf.org/doc/html/rfc6352.html